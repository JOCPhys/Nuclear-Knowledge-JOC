{% extends "base.html" %}
{% load static %}
{% block title %}Edit Topic{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>Edit Topic</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
    <a href="{% url 'request_approval' topic.slug %}" class="btn btn-success mt-3">Request Approval</a>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const titleInput = document.querySelector('#id_title');
        const slugInput = document.querySelector('#id_slug');

        titleInput.addEventListener('input', function() {
            const slug = titleInput.value
                .toLowerCase()
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/(^-|-$)+/g, '');
            slugInput.value = slug;
        });
    });
</script>
{% endblock %}